<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
</head>
<body>
  <h2>POT</h2>
  <% pot.items.forEach(item => { %>
    <%- JSON.stringify(item) %><br>
  <% }) %>
  <hr>
  <h2><%= chips %> VS <%= computerChips %></h2>
  <hr>
  <h2>HAND</h2>
  <pre><%- JSON.stringify(cards) %></pre>
  <% if (flop.length === 3) { %>
    <hr>
    <h2>FLOP</h2>
    <pre><%- JSON.stringify(flop) %></pre>
  <% } %>
  <% if (turn != null) { %>
    <hr>
    <h2>TURN</h2>
    <pre><%- JSON.stringify(turn) %></pre>
  <% } %>
  <% if (river != null) { %>
    <hr>
    <h2>RIVER</h2>
    <pre><%- JSON.stringify(river) %></pre>
  <% } %>
  
  <hr>
  <% if (toCall === 0) { %>
    <button onclick="window.location.href = '/?action=call'">CHECK</button>
    <button onclick="window.location.href = '/?action=raise&amount=100'">RAISE (100)</button>
  <% } else { %>
    <button onclick="window.location.href = '/?action=call'">CALL (<%= toCall %>)</button>
    <button onclick="window.location.href = '/?action=raise&amount=<%= toCall * 2 %>'">RAISE (<%= toCall * 2 %>)</button>
    <button onclick="window.location.href = '/?action=fold'">FOLD</button>
  <% } %>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>
  <script type="text/javascript">
    const socket = io.connect('http://localhost:3000')
    socket.on('end', winner => {
      alert(`${winner.name} wins ${winner.total } chips!`)
    })
  </script>
</body>
</html>
